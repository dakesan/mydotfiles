---
name: gijiroku
description: This skill should be used when creating complete meeting minutes (議事録) from handwritten notes and audio transcriptions. It processes both data sources to produce comprehensive, well-formatted Obsidian meeting notes that preserve all information while correcting transcription errors and standardizing terminology. Use this skill when users provide meeting recordings, transcripts, or handwritten notes and request formatted meeting minutes.
---

# Gijiroku (議事録作成スキル)

## Overview

音声文字起こしテキストから構造化された議事録（会議記録）を作成する専用スキルです。音声認識AIの誤認識を修正し、既存のメモと統合して、6ヶ月後でも理解できる完全な議事録を生成します。

## When to Use This Skill

以下のトリガーがある場合、このスキルを使用します：

1. **明示的な依頼**:
   - 「音声文字起こしから議事録を作成して」
   - 「議事録を完成させて」
   - 「gijirokuスキルを使って」

2. **状況からの推測**:
   - 長い会話形式のテキスト（音声ログ）と既存の議事録メモの両方が提供された
   - 音声認識AIの出力らしきテキスト（句読点が少ない、口語的、フィラーワードが多い）
   - `random/`ディレクトリ内の未完成の会議メモ

3. **ユーザーの意図**:
   - メモを「完成させる」「仕上げる」「整える」という依頼

## Required Input Validation

**CRITICAL**: このスキルを実行する前に、必ず以下を確認してください：

### 必須インプット
1. **音声文字起こしテキスト** - **必須**
   - ユーザーから音声ログ（音声文字起こしテキスト）が提供されているか確認
   - 会話形式の長いテキストが必要

2. **既存の議事録メモファイル** - 推奨（なくても可）
   - `random/`ディレクトリ内の未完成メモなど
   - ユーザーが事前に書いた箇条書きメモ

### インプット不足時の対応

**音声文字起こしテキストが提供されていない場合**:

```
申し訳ございません。議事録を作成するには、音声文字起こしテキスト（音声ログ）が必要です。

以下の形式で音声ログをご提供ください：

---
音声ログは以下です：

[ここに音声文字起こしテキストを貼り付け]
---

音声ログがない場合は、以下の方法で取得してください：
1. 会議の録音ファイルを音声認識AIで文字起こし
2. 文字起こし結果をそのままコピー＆ペースト（校正不要）
```

このメッセージをユーザーに表示し、**作業を中断**してください。音声ログなしでは議事録作成は不可能です。

### インプット確認チェックリスト

作業開始前に以下を確認：
- [ ] 音声文字起こしテキストが提供されている（必須）
- [ ] 既存メモファイルのパスが指定されているか、文脈から判断できる（推奨）
- [ ] ファイル読み込み権限がある（Readツール使用可能）
- [ ] ファイル書き込み権限がある（Editツール使用可能）

すべて確認できたら、Phase 0に進んでください。

## Core Workflow: 3-Phase Process

### **Phase 0: TODO作成（必須）**

**作業開始前に必ずTodoWriteツールでTODOリストを作成してください。**

必須TODOリスト:
```json
[
  {
    "content": "speech_correction.yamlを読み込み、音声認識誤りを修正する",
    "status": "pending",
    "activeForm": "音声認識誤りを修正中"
  },
  {
    "content": "音声文字起こしを構造化し、全ての文に主語を明記する",
    "status": "pending",
    "activeForm": "音声を構造化し主語を明記中"
  },
  {
    "content": "既存メモと音声情報を統合し、完全な議事録を作成する",
    "status": "pending",
    "activeForm": "メモと音声を統合中"
  },
  {
    "content": "YAMLフロントマターとタグを適用し、フォーマットを調整する",
    "status": "pending",
    "activeForm": "フォーマットを調整中"
  },
  {
    "content": "品質チェックリストで確認し、ファイルに書き込む",
    "status": "pending",
    "activeForm": "品質チェックと書き込み中"
  }
]
```

**TODO更新のルール**:
- **開始前**: 全TODOを`pending`で作成
- **各フェーズ開始時**: 該当TODOを`in_progress`に変更
- **各フェーズ完了時**: 該当TODOを`completed`に変更し、次のTODOを`in_progress`に
- **重要**: 常に1つのTODOが`in_progress`状態を保つ（0個や2個以上にしない）

### **Phase 1: 音声認識の校正（最重要）**

**目的**: 音声認識AIの誤認識を修正し、正確な固有名詞を使用する

**手順**:

1. **`speech_correction.yaml`を読み込む**
   - 必ず最初にこのファイルを参照
   - 位置: `.claude/skills/gijiroku/speech_correction.yaml`

2. **優先度順に修正**
   - Level 1: 会社名（Logomix） - 最優先
   - Level 2: 本人名（大嶽） - 必須
   - Level 3: 技術用語（SWING, CAS9など）
   - Level 4: その他の固有名詞

3. **文脈に基づく判断**
   - 「大竹さん」が一人称的に使われている → 「大嶽さん」に修正
   - 「ロボミックス」「ろぼみっくす」 → 常に「Logomix」
   - 技術用語の大文字/小文字に注意（SWING, CAS9, iPS）

4. **修正記録**
   - 重要な修正は内部的にメモ（ユーザーには見せない）
   - 不確実な修正があれば後で確認

**修正例**:
```
元: 「大竹さんがロボミックスの技術であるスイングを使って...」
↓
修正後: 「大嶽さんがLogomixの技術であるSWINGを使って...」
```

### **Phase 2: 構造化と整理**

**目的**: 音声文字起こしを読みやすい議事録フォーマットに変換

**手順**:

1. **話題のグルーピング**
   - 同じ話題の発言をまとめる
   - 主要なトピックを特定してH3見出しにする

2. **階層構造の作成**
   ```markdown
   ## 議事

   ### 1. [メイントピック]

   #### [サブトピック]
   - 詳細な議論内容
   - 決定事項

   **次のアクション**:
   - アクションアイテム
   ```

3. **冗長性の削除**
   - 繰り返しや言い直しを整理
   - 本質的な内容を保持
   - 「えー」「あの」などのフィラーを削除

4. **主語の明示（最重要）**
   - **全ての文に主語を明記する** - これは議事録の最重要ルール
   - 発言内容: 「○○さんが△△について説明した」「××さんが提案した」
   - 決定事項: 「○○さんが承認した」「××チームで決定した」
   - アクション: 「○○さんが実施する」「××さんが確認する」
   - 意見・質問: 「○○さん意見: ...」「××さん質問: ...」
   - 悪い例: 「実験を進めることになった」（誰が？）
   - 良い例: 「大嶽さんが実験を進めることになった」

5. **主語不明時の対処**
   - **基本方針**: 文脈から主語を推定する
   - 前後の会話、話題の流れ、担当領域から推定
   - 推定例: 前の発言者が同じ話題を続けている場合は同一人物と推定
   - 推定例: 技術的な内容→技術担当者、契約の話→BizDev担当者と推定
   - **どうしても不明な場合**: 「[主語不明] ...」と明記
   - 推定に自信がない場合: 「[推定: ○○さん] ...」と記載

6. **発言者の一貫した記載**
   - 議論の流れで発言者を明記: 「矢口さんは...と説明。これに対してTaikiさんは...と応答」
   - 複数人の議論: 「大嶽さんが提案し、矢口さんが同意、Taikiさんが懸念を表明」
   - 主語なしで文を書かない原則を厳守

7. **文脈の補足**
   - 音声だけでは分かりにくい部分に説明を追加
   - 括弧内に補足情報を記載
   - 例: 「プロジェクト2（ニューログリア細胞 S1/SI5）」

### **Phase 3: 既存メモとの統合**

**目的**: ユーザーが事前に書いたメモと音声文字起こしの情報を統合

**手順**:

1. **既存メモの内容を尊重**
   - 既存メモのポイントは必ず保持
   - 既存メモの構造を基本フレームワークとして使用

2. **音声から詳細を追加**
   - 既存メモの各ポイントを音声情報で拡充
   - 背景、理由、文脈を追加
   - 数字、日付、具体的な名前を補完

3. **矛盾の解決**
   - 既存メモと音声が矛盾する場合は音声を優先（より詳細）
   - ただし明らかに既存メモが正しい場合は既存メモを優先

4. **新規情報の追加**
   - 音声にあって既存メモにない話題は新しいセクションとして追加

**統合例**:
```markdown
# 既存メモ
- Insitroのやつ
  - 成果物を渡すかどうか

# 音声から
（30分の詳細な議論）

# 統合後
### Insitroプロジェクトの提案内容詰め

**背景**:
- 矢口さんと詳細な打ち合わせを実施
- AI創薬プロジェクトだが、まずは純粋な細胞作成プロジェクトとしてスタート

**成果物の考え方**:
- 最終細胞とその解析データが先方の主要な納品物
- 中間体細胞の納品については打ち合わせ時に詰める
...（詳細な議論内容）
```

## Format Specification

### YAMLフロントマター

```yaml
---
cdate: YYYY-MM-DD
mdate: YYYY-MM-DD
tags: [meeting, meeting-type, content-tags...]
draft: false
meetingType: "bizdev|pl|udc|cmc|..."
meeting_scope: internal|external
author: Hiro
---
```

**重要**:
- `tags`: 必ず `/Users/oodakemac/Documents/Hiro/tags.yaml` を参照して正しいタグを使用
- `meeting_scope`: 内部会議は`internal`、外部参加者がいる場合は`external`
- 既存メモにattendeesフィールドがあっても削除する（本文に記載）

### 本文構造

```markdown
# YYYYMMDD_meetingName

**日時**: YYYY-MM-DD
**参加者**: 名前1、名前2、名前3
**議題**: 会議の概要を1行で

## 議事

### 1. [メイントピック1]

#### [サブトピック]
- **主語を必ず明記**: 大嶽さんが○○について説明した
- **決定事項**: 矢口さんが△△を承認し、Taikiさんが実装を担当することになった
- **議論の流れ**: 大嶽さんが提案し、これに対して矢口さんが懸念を表明。最終的にTaikiさんの提案で合意に至った

#### 良い例（主語あり）
- 大嶽さんがInsitroプロジェクトの進捗を報告した
- 矢口さんが契約条件について説明し、Taikiさんが技術的な実現可能性を確認した
- 野澤さんが実験スケジュールの変更を提案し、チーム全体で承認した

#### 主語不明時の対処例
- [推定: 矢口さん] 契約条件について補足説明があった（前後の文脈から矢口さんと推定）
- [主語不明] データの再解析が必要との指摘があった（発言者特定不可）
- 大嶽さんが実験計画を説明。[推定: 同じく大嶽さんが] スケジュールについても言及した

#### 悪い例（主語なし - 絶対に避ける）
- ❌ 実験を進めることになった（誰が？）
- ❌ 契約条件について説明があった（誰が説明した？）
- ❌ 次週までに確認する（誰が確認する？）

### 2. [メイントピック2]

（内容）

## Tasks

### [カテゴリ1]
- [ ] 大嶽：タスク内容 📅 2025-11-20
- 矢口：タスク内容 📅 2025-11-22
- [ ] Hiro：タスク内容 📅 2025-11-25

### [カテゴリ2]
- Taiki：タスク内容 📅 2025-11-30
- [ ] Odake：タスク内容 📅 2025-12-01
```

**重要なTasksフォーマット規則**:
- フォーマット: `担当者：タスク内容 📅 YYYY-MM-DD`
- **大嶽/Hiro/Odakeにアサインされたタスクのみ** `- [ ]` チェックボックスをつける
- 他のメンバーにアサインされたタスクは `- ` のみ（チェックボックスなし）
- 期日は必ずObsidian Tasks plugin記法 `📅 YYYY-MM-DD` を使用
- 期日が不明な場合は省略可

### 書式ルール

1. **見出し**
   - H1: ファイル名と同じ
   - H2: 大セクション（議事、Tasks）
   - H3: メイントピック
   - H4: サブトピック
   - **見出しに太字を使わない**

2. **強調**
   - **太字**: 本文中の重要なポイント
   - ==ハイライト==: 非常に重要（控えめに使用）

3. **リスト**
   - 箇条書き: `-` を使用
   - チェックボックス: `- [ ]` を使用

4. **テーブル**
   - 構造化データに使用
   - Markdown table記法

## Quality Checklist

議事録作成後、以下を確認：

### 音声認識校正
- [ ] `speech_correction.yaml`を参照した
- [ ] 会社名が「Logomix」になっている（ロボミックス×）
- [ ] 本人名が「大嶽」になっている（大竹×）
- [ ] 技術用語の大文字小文字が正しい（SWING, CAS9, iPS）
- [ ] その他の固有名詞が修正されている

### フォーマット
- [ ] YAMLフロントマターが完全
- [ ] `tags.yaml`に従ったタグを使用
- [ ] `meeting_scope`が設定されている
- [ ] 日付・参加者・議題が本文に記載されている
- [ ] 見出しに太字を使っていない
- [ ] H2, H3, H4の階層が適切

### 内容
- [ ] 既存メモの全内容を保持
- [ ] 音声から詳細情報を追加
- [ ] **全ての文に主語が明記されている**（最重要）
- [ ] 発言内容に発言者が明記されている（「○○さんが説明した」）
- [ ] 決定事項に決定者が明記されている（「○○さんが承認した」「××チームで決定した」）
- [ ] アクションに実行者が明記されている（「○○さんが実施する」）
- [ ] 主語不明の場合は文脈から推定している
- [ ] 推定に自信がない場合は「[推定: ○○さん]」と記載
- [ ] どうしても不明な場合は「[主語不明]」と明記
- [ ] 主語なし文がないことを確認（「実験を進める」×→「大嶽さんが実験を進める」○）
- [ ] 文脈が6ヶ月後でも理解できる
- [ ] 冗長性を削除し、本質を保持
- [ ] Tasksセクションに具体的なアクションアイテム

### 構造
- [ ] 話題ごとに適切にグルーピング
- [ ] 論理的な順序
- [ ] サブトピックが適切に分類
- [ ] Tasksがカテゴリ分けされている

### Tasksフォーマット
- [ ] タスクフォーマット: `担当者：タスク内容 📅 YYYY-MM-DD`
- [ ] 大嶽/Hiro/Odakeにアサインされたタスクのみチェックボックス `- [ ]` 付き
- [ ] 他メンバーのタスクはチェックボックスなし `- ` のみ
- [ ] 期日はObsidian Tasks plugin記法 `📅 YYYY-MM-DD` を使用

## Troubleshooting

### 問題: 固有名詞の判断がつかない

**対処**:
1. `speech_correction.yaml`を再確認
2. `/Users/oodakemac/Documents/Hiro/tags.yaml`で会社名を確認
3. `/Users/oodakemac/Documents/Hiro/CLAUDE.md`の「Standard Names」を確認
4. 不明な場合は元の表記を保持し、`（要確認）`と注記

### 問題: 既存メモと音声の内容が異なる

**対処**:
1. 音声の方が詳細な場合 → 音声を優先
2. 既存メモが要約として正確な場合 → 両方を統合
3. 明らかな矛盾 → ユーザーに確認を求める

### 問題: 話題の切れ目が分からない

**対処**:
1. 音声の沈黙や話者の変化を手がかりにする
2. トピックの転換を示す言葉（「次に」「それから」「あと」）
3. 既存メモの構造をガイドにする

### 問題: 音声が長すぎてコンテキストに入らない

**対処**:
1. セクションごとに分割して処理
2. 既存メモを優先的に保持
3. 重要度の低い詳細は省略（本質を保持）

## Complete Workflow

```
STEP -1: インプット検証（最優先）【必須】
   ↓
   【音声文字起こしテキストの確認】
   - ユーザーから音声ログが提供されているか？
     → YES: 次のステップへ進む
     → NO: ユーザーに音声ログの提供を依頼し、作業を中断
   ↓
STEP 0: TODOリストを作成（TodoWriteツール使用）【必須】
   ↓
STEP 1: speech_correction.yamlを読み込む
   ↓
STEP 2: Phase 1 - 音声認識を校正（TODO更新: in_progress → completed）
   - 会社名（Logomix）を最優先で修正
   - 本人名（大嶽）を修正
   - 技術用語を修正
   - その他固有名詞を修正
   ↓
STEP 3: Phase 2 - 構造化（TODO更新: in_progress → completed）
   - 話題をグルーピング
   - 階層構造を作成
   - 冗長性を削除
   - **全ての文に主語を明記**（発言者・決定者・実行者）
   - 発言者を一貫して明示
   ↓
STEP 4: Phase 3 - 既存メモと統合（TODO更新: in_progress → completed）
   - 既存メモの構造を基本フレームワークに
   - 音声から詳細を追加（主語を明記しながら）
   - 新規情報を追加（誰が何をしたか明確に）
   ↓
STEP 5: フォーマット調整（TODO更新: in_progress → completed）
   - YAMLフロントマター作成
   - tags.yamlを参照してタグ付与
   - 見出し階層を調整
   - Tasksフォーマット適用（担当者：タスク内容 📅 YYYY-MM-DD）
   - 大嶽/Hiro/Odakeのタスクのみチェックボックス化
   - **主語なし文の確認と修正**
   ↓
STEP 6: 品質チェック（TODO更新: in_progress → completed）
   - チェックリストを確認
   - **主語の明記を再確認**（最重要）
   ↓
STEP 7: ファイルに書き込み（全TODO完了）
```

## Referenced Files

議事録作成時に参照すべきファイル：

1. **必須**: `speech_correction.yaml` - 音声認識修正辞書（このスキル内）
2. **必須**: `/Users/oodakemac/Documents/Hiro/tags.yaml` - タグ標準リスト
3. **推奨**: `/Users/oodakemac/Documents/Hiro/CLAUDE.md` - プロジェクト標準

## Important Notes

1. **【最重要】インプット検証を必ず最初に行う**
   - 音声文字起こしテキストが提供されているか確認
   - 提供されていない場合は作業を中断し、ユーザーに依頼
   - インプットなしでは議事録作成は不可能

2. **音声認識校正を最初に行う**
   - これを忘れると固有名詞が誤ったままになる
   - 特にLogomix、大嶽は最重要

3. **【最重要】全ての文に主語を明記する**
   - 議事録の最も重要なルール：誰が、何を、どうしたか
   - 発言内容: 「○○さんが説明した」「××さんが提案した」
   - 決定事項: 「○○さんが承認した」「××チームで決定した」
   - アクション: 「○○さんが実施する」「××さんが確認する」
   - **主語不明時の対処**: 基本は文脈から推定。不明な場合は「[主語不明]」「[推定: ○○さん]」と明記
   - 主語なし文は絶対に避ける（例: 「実験を進める」×→「大嶽さんが実験を進める」○）
   - 6ヶ月後に見返したときに「誰が？」と疑問に思わないように

4. **既存メモを尊重する**
   - ユーザーが書いたメモは重要な意図が含まれている
   - 削除せず、拡充する方針

5. **文脈を補足する**
   - 6ヶ月後に読んでも理解できるように
   - 音声だけでは分からない背景を追加

6. **コンパクトさと詳細さのバランス**
   - 冗長にならないよう本質を抽出
   - ただし重要な文脈は削除しない

7. **一貫性を保つ**
   - 同じ固有名詞は常に同じ表記
   - フォーマットを統一

8. **TODOリスト管理は必須**
   - 作業開始前に必ずTodoWriteツールでTODOを作成
   - 各フェーズ完了後すぐにTODOを更新
   - 常に1つのTODOが`in_progress`状態を保つ

9. **Tasksフォーマットの厳守**
   - 全てのタスクは `担当者：タスク内容 📅 YYYY-MM-DD` の形式で記載
   - **大嶽/Hiro/Odakeにアサインされたタスクのみ** チェックボックス `- [ ]` をつける
   - 他のメンバー（矢口、Taiki、野澤など）のタスクはチェックボックスなし `- ` のみ
   - これはObsidian Tasks pluginで本人のタスクのみを抽出するため
